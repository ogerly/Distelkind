<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DISTELKIND | Conscious HipHop Dresden</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Conscious HipHop aus Dresden. Texte, die tiefer graben. Baupl√§ne f√ºr den Ausbruch aus dem Weiter-so. Wachse, wenn alles schl√§ft.">
    <meta name="keywords" content="Distelkind, Conscious HipHop, Dresden, Hip Hop, Rap, Conscious Rap, DEVmatrose, Musik">
    <meta name="author" content="Distelkind">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ogerly.github.io/Distelkind/">
    <meta property="og:title" content="DISTELKIND | Conscious HipHop Dresden">
    <meta property="og:description" content="Conscious HipHop aus Dresden. Wachse, wenn alles schl√§ft. Texte, die tiefer graben ‚Äì Baupl√§ne f√ºr den Ausbruch aus dem Weiter-so.">
    <meta property="og:image" content="https://ogerly.github.io/Distelkind/banner.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://ogerly.github.io/Distelkind/">
    <meta name="twitter:title" content="DISTELKIND | Conscious HipHop Dresden">
    <meta name="twitter:description" content="Conscious HipHop aus Dresden. Wachse, wenn alles schl√§ft.">
    <meta name="twitter:image" content="https://ogerly.github.io/Distelkind/banner.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16">
    
    <!-- PWA / App Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f4e4bc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Distelkind">
    <link rel="apple-touch-icon" href="profile.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=2">
</head>
<body>

    <!-- Mobile Splash Screen / Entry Animation -->
    <div id="mobile-splash" class="mobile-splash hidden">
        <div class="splash-content">
            <img src="profile.png" alt="Distelkind" class="splash-logo">
            <h1 class="splash-title">DISTELKIND</h1>
            <p class="splash-subtitle">Das digitale Grimoire ist ge√∂ffnet</p>
            <button id="enter-button" class="enter-button">
                <span class="enter-icon">‚öø</span>
                <span>Bitte eintreten</span>
            </button>
        </div>
    </div>

    <!-- Install App Button (Mobile) -->
    <button id="install-app-btn" class="install-app-btn hidden">
        <span class="install-icon">üì±</span>
        <span>Als App installieren</span>
    </button>

    <header class="hero-section">
        <div class="banner-container">
            <img src="banner.png" alt="Distelkind Banner" class="hero-banner pulsing-element">
        </div>
        <div class="profile-container">
             <img src="profile.png" alt="Distelkind Portrait" class="profile-image">
        </div>
        <div class="hero-text">
            <h1>DISTELKIND</h1>
            <h2>Conscious HipHop aus Dresden</h2>
            <p class="subline">"Wachse, wenn alles schl√§ft."</p>
            <div class="social-links">
                <a href="https://www.youtube.com/channel/UC9S0LUR6NVs4MtO74kz8nJg" target="_blank" class="social-seal youtube">YouTube</a>
                <a href="https://www.instagram.com/distelkind/" target="_blank" class="social-seal instagram">Instagram</a>
                <a href="https://web.telegram.org/k/#@distelkind_orginal" target="_blank" class="social-seal telegram">Telegram</a>
            </div>
        </div>
    </header>

    <div class="separator">‚úª ‚úª ‚úª</div>

    <section class="manifest-section">
        <h3>Das Manifest</h3>
        <div class="content-block">
            <p>Willkommen in der Werkstatt.</p>
            <p>Hier entsteht Conscious HipHop, der tiefer gr√§bt. Wir sind mehr als nur R√§dchen in einem schwankenden Apparat. Meine Texte sind Baupl√§ne f√ºr den Ausbruch aus dem "Weiter-so".</p>
            <p>Ich bin kein Schatten meiner Fehler, ich bin der Architekt meiner eigenen Geschichte. Diese Musik ist f√ºr alle, die zweifeln, die f√ºhlen und die wachsen ‚Äì auch wenn alles andere schl√§ft.</p>
            <p class="signature">‚Äî Distelkind (Ein DEVmatrose-Art-Projekt)</p>
        </div>
    </section>

    <div class="separator">‚úª ‚úª ‚úª</div>

    <section class="music-section">
        <div class="music-header">
            <h3>Das Grimoire (Kl√§nge & Texte)</h3>
            <div class="view-toggle">
                <button id="list-view" class="toggle-btn" title="Listenansicht">‚ò∞</button>
                <button id="grid-view" class="toggle-btn active" title="Kachelansicht">‚äû</button>
            </div>
        </div>
        <div class="music-list" id="music-container">
            <p style="text-align:center; opacity:0.6;">Lade Pergament...</p>
        </div>
    </section>

    <div class="separator">‚úª ‚úª ‚úª</div>

    <section class="contact-section">
        <h3>Auftragswerkstatt</h3>
        <p>Du suchst Worte, die bleiben? F√ºr Events, Themen oder Aktionen. Ich schreibe deinen Soundtrack. Kein Standard. Nur Handwerk.</p>
        
        <a href="mailto:devmatrose@proton.me?subject=Anfrage%20f√ºr%20einen%20Songtext%20%2B%20Soundversion" class="contact-button">
            Anfrage senden
        </a>
        <p class="contact-mail-plain">oder an: devmatrose@proton.me</p>
    </section>

    <footer>
        <div class="separator-small">‚úª</div>
        <p>&copy; 2025 Distelkind Art Project | Dresden <span style="color:#a83f3f;">‚ù§</span></p>
        <p class="footer-subtext">Ein Kunstprojekt von <a href="https://ogerly.github.io/" target="_blank" class="creator-link">DEVmatrose</a></p>
        <div class="footer-links">
            <a href="https://www.youtube.com/channel/UC9S0LUR6NVs4MtO74kz8nJg" target="_blank">YouTube</a> | 
            <a href="https://www.instagram.com/distelkind/" target="_blank">Instagram</a> | 
            <a href="https://web.telegram.org/k/#@distelkind_orginal" target="_blank">Telegram</a> | 
            <a href="https://github.com/ogerly" target="_blank">GitHub</a>
        </div>
    </footer>

    <script>
        // Mobile Splash Screen & PWA Installation
        let deferredPrompt;
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches;

        // Zeige Splash Screen auf Mobile bei erstem Besuch
        if (isMobile && !isStandalone && !sessionStorage.getItem('splashShown')) {
            document.getElementById('mobile-splash').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // Enter Button
        document.getElementById('enter-button')?.addEventListener('click', () => {
            const splash = document.getElementById('mobile-splash');
            splash.classList.add('fade-out');
            setTimeout(() => {
                splash.remove();
                document.body.style.overflow = '';
            }, 800);
            sessionStorage.setItem('splashShown', 'true');
        });

        // PWA Install Button
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-app-btn').classList.remove('hidden');
        });

        document.getElementById('install-app-btn')?.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    document.getElementById('install-app-btn').classList.add('hidden');
                }
                deferredPrompt = null;
            }
        });

        // Service Worker registrieren
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/Distelkind/sw.js').catch(() => {});
        }

        let currentView = 'grid'; // 'list' oder 'grid'
        let videosData = [];

        // YouTube Video-ID aus URL extrahieren
        function getYouTubeID(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        // Datums-Formatierung
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short' };
            return new Date(dateString).toLocaleDateString('de-DE', options);
        }

        // Rendere die Videos in der aktuellen Ansicht
        function renderVideos() {
            const container = document.getElementById('music-container');
            container.innerHTML = '';
            container.className = currentView === 'grid' ? 'music-grid' : 'music-list';

            videosData.forEach(video => {
                const videoID = getYouTubeID(video.url);
                const thumbnail = `https://img.youtube.com/vi/${videoID}/hqdefault.jpg`;

                if (currentView === 'list') {
                    // Listenansicht
                    const songHTML = `
                        <div class="song-entry">
                            <div class="song-header">
                                <span class="song-title">${video.title}</span>
                                <span class="song-date">| ${formatDate(video.date)}</span>
                            </div>
                            <div class="song-links">
                                <a href="${video.url}" target="_blank" class="seal-link youtube">‚ñ∂ Auf YouTube ansehen</a>
                            </div>
                        </div>
                    `;
                    container.innerHTML += songHTML;
                } else {
                    // Kachelansicht mit Vorschaubild
                    const cardHTML = `
                        <div class="song-card">
                            <a href="${video.url}" target="_blank" class="card-link">
                                <div class="card-thumbnail">
                                    <img src="${thumbnail}" alt="${video.title}" loading="lazy">
                                    <div class="play-overlay">‚ñ∂</div>
                                </div>
                                <div class="card-content">
                                    <h4 class="card-title">${video.title}</h4>
                                    <p class="card-date">${formatDate(video.date)}</p>
                                </div>
                            </a>
                        </div>
                    `;
                    container.innerHTML += cardHTML;
                }
            });
        }

        // Toggle zwischen Listen- und Kachelansicht
        document.addEventListener('DOMContentLoaded', () => {
            const listBtn = document.getElementById('list-view');
            const gridBtn = document.getElementById('grid-view');

            listBtn.addEventListener('click', () => {
                currentView = 'list';
                listBtn.classList.add('active');
                gridBtn.classList.remove('active');
                renderVideos();
            });

            gridBtn.addEventListener('click', () => {
                currentView = 'grid';
                gridBtn.classList.add('active');
                listBtn.classList.remove('active');
                renderVideos();
            });
        });

        // Lade die JSON Datei
        fetch('titel-list.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Netzwerk-Antwort war nicht ok');
                }
                return response.json();
            })
            .then(data => {
                videosData = data.videos;
                renderVideos();
            })
            .catch(error => {
                console.error('Fehler beim Laden:', error);
                document.getElementById('music-container').innerHTML = '<p>Die Seite konnte das Grimoire nicht lesen (JSON Fehler).</p>';
            });
    </script>

</body>
</html>