<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DISTELKIND | Conscious HipHop Dresden</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=2">
</head>
<body>

    <header class="hero-section">
        <div class="banner-container">
            <img src="banner.png" alt="Distelkind Banner" class="hero-banner pulsing-element">
        </div>
        <div class="profile-container">
             <img src="profile.png" alt="Distelkind Portrait" class="profile-image">
        </div>
        <div class="hero-text">
            <h1>DISTELKIND</h1>
            <h2>Conscious HipHop aus Dresden</h2>
            <p class="subline">"Wachse, wenn alles schläft."</p>
            <div class="social-links">
                <a href="https://www.youtube.com/channel/UC9S0LUR6NVs4MtO74kz8nJg" target="_blank" class="social-seal youtube">YouTube</a>
                <a href="https://www.instagram.com/distelkind/" target="_blank" class="social-seal instagram">Instagram</a>
                <a href="https://web.telegram.org/k/#@distelkind_orginal" target="_blank" class="social-seal telegram">Telegram</a>
            </div>
        </div>
    </header>

    <div class="separator">✻ ✻ ✻</div>

    <section class="manifest-section">
        <h3>Das Manifest</h3>
        <div class="content-block">
            <p>Willkommen in der Werkstatt.</p>
            <p>Hier entsteht Conscious HipHop, der tiefer gräbt. Wir sind mehr als nur Rädchen in einem schwankenden Apparat. Meine Texte sind Baupläne für den Ausbruch aus dem "Weiter-so".</p>
            <p>Ich bin kein Schatten meiner Fehler, ich bin der Architekt meiner eigenen Geschichte. Diese Musik ist für alle, die zweifeln, die fühlen und die wachsen – auch wenn alles andere schläft.</p>
            <p class="signature">— Distelkind (Ein DEVmatrose-Art-Projekt)</p>
        </div>
    </section>

    <div class="separator">✻ ✻ ✻</div>

    <section class="music-section">
        <div class="music-header">
            <h3>Das Grimoire (Klänge & Texte)</h3>
            <div class="view-toggle">
                <button id="list-view" class="toggle-btn active" title="Listenansicht">☰</button>
                <button id="grid-view" class="toggle-btn" title="Kachelansicht">⊞</button>
            </div>
        </div>
        <div class="music-list" id="music-container">
            <p style="text-align:center; opacity:0.6;">Lade Pergament...</p>
        </div>
    </section>

    <div class="separator">✻ ✻ ✻</div>

    <section class="contact-section">
        <h3>Auftragswerkstatt</h3>
        <p>Du suchst Worte, die bleiben? Für Events, Themen oder Aktionen. Ich schreibe deinen Soundtrack. Kein Standard. Nur Handwerk.</p>
        
        <a href="mailto:devmatrose@proton.me?subject=Anfrage%20für%20einen%20Songtext%20%2B%20Soundversion" class="contact-button">
            Anfrage senden
        </a>
        <p class="contact-mail-plain">oder an: devmatrose@proton.me</p>
    </section>

    <footer>
        <div class="separator-small">✻</div>
        <p>&copy; 2025 Distelkind Art Project | Dresden <span style="color:#a83f3f;">❤</span></p>
        <div class="footer-links">
            <a href="https://www.youtube.com/channel/UC9S0LUR6NVs4MtO74kz8nJg" target="_blank">YouTube</a> | 
            <a href="https://www.instagram.com/distelkind/" target="_blank">Instagram</a> | 
            <a href="https://web.telegram.org/k/#@distelkind_orginal" target="_blank">Telegram</a>
        </div>
    </footer>

    <script>
        let currentView = 'list'; // 'list' oder 'grid'
        let videosData = [];

        // YouTube Video-ID aus URL extrahieren
        function getYouTubeID(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        // Datums-Formatierung
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short' };
            return new Date(dateString).toLocaleDateString('de-DE', options);
        }

        // Rendere die Videos in der aktuellen Ansicht
        function renderVideos() {
            const container = document.getElementById('music-container');
            container.innerHTML = '';
            container.className = currentView === 'grid' ? 'music-grid' : 'music-list';

            videosData.forEach(video => {
                const videoID = getYouTubeID(video.url);
                const thumbnail = `https://img.youtube.com/vi/${videoID}/hqdefault.jpg`;

                if (currentView === 'list') {
                    // Listenansicht
                    const songHTML = `
                        <div class="song-entry">
                            <div class="song-header">
                                <span class="song-title">${video.title}</span>
                                <span class="song-date">| ${formatDate(video.date)}</span>
                            </div>
                            <div class="song-links">
                                <a href="${video.url}" target="_blank" class="seal-link youtube">▶ Auf YouTube ansehen</a>
                            </div>
                        </div>
                    `;
                    container.innerHTML += songHTML;
                } else {
                    // Kachelansicht mit Vorschaubild
                    const cardHTML = `
                        <div class="song-card">
                            <a href="${video.url}" target="_blank" class="card-link">
                                <div class="card-thumbnail">
                                    <img src="${thumbnail}" alt="${video.title}" loading="lazy">
                                    <div class="play-overlay">▶</div>
                                </div>
                                <div class="card-content">
                                    <h4 class="card-title">${video.title}</h4>
                                    <p class="card-date">${formatDate(video.date)}</p>
                                </div>
                            </a>
                        </div>
                    `;
                    container.innerHTML += cardHTML;
                }
            });
        }

        // Toggle zwischen Listen- und Kachelansicht
        document.addEventListener('DOMContentLoaded', () => {
            const listBtn = document.getElementById('list-view');
            const gridBtn = document.getElementById('grid-view');

            listBtn.addEventListener('click', () => {
                currentView = 'list';
                listBtn.classList.add('active');
                gridBtn.classList.remove('active');
                renderVideos();
            });

            gridBtn.addEventListener('click', () => {
                currentView = 'grid';
                gridBtn.classList.add('active');
                listBtn.classList.remove('active');
                renderVideos();
            });
        });

        // Lade die JSON Datei
        fetch('titel-list.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Netzwerk-Antwort war nicht ok');
                }
                return response.json();
            })
            .then(data => {
                videosData = data.videos;
                renderVideos();
            })
            .catch(error => {
                console.error('Fehler beim Laden:', error);
                document.getElementById('music-container').innerHTML = '<p>Die Seite konnte das Grimoire nicht lesen (JSON Fehler).</p>';
            });
    </script>

</body>
</html>